{% extends "base.html" %}
{% import "macros.html" as forms %}

{% block title %}Reset Password - Forklift Repair Logging System{% endblock %}

{% block header_title %}Reset Password{% endblock %}

{% block content %}
<section class="auth-form-section">
    <div class="auth-container">
        {% if error %}
        <div class="error-message">
            <p>{{ error }}</p>
        </div>
        {% endif %}
        
        {% if success %}
        <div class="success-message">
            <p>{{ success }}</p>
            <p><a href="/auth/login">Return to login</a></p>
        </div>
        {% else %}
        <form action="/auth/reset-password/{{ token }}" method="post" class="auth-form">
            <input type="hidden" name="token" value="{{ token }}">
            
            {{ forms.input_field("password", "New Password", "password") }}
            {{ forms.input_field("confirm_password", "Confirm Password", "password") }}
            
            <div class="form-actions">
                {{ forms.submit_button("Reset Password") }}
            </div>
            
            <div class="form-links">
                <a href="/auth/login" class="back-to-login-link">Back to Login</a>
            </div>
        </form>
        {% endif %}
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // Focus on password field when page loads
    document.addEventListener('DOMContentLoaded', function() {
        const passwordField = document.getElementById('password');
        if (passwordField) passwordField.focus();
    });
</script>
{% endblock %}